# üîß –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "Join the Channel" –≤ Rocket.Chat

**–î–∞—Ç–∞:** 23 –∏—é–Ω—è 2025 –≥., 20:35 MSK  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  
**–ü–æ–¥—Ö–æ–¥:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL endpoint –±–µ–∑ –∫–∞—Å–∞–Ω–∏—è MongoDB

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê

–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–Ω–∞–ª–æ–≤ –≤ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º Rocket.Chat –ø–æ—è–≤–ª—è–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ **"Join the Channel"**, –∫–æ—Ç–æ—Ä–∞—è —Ç—Ä–µ–±–æ–≤–∞–ª–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∫–∞–Ω–∞–ª. –≠—Ç–æ –Ω–∞—Ä—É—à–∞–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –≤ Django –∏ –∏–º–µ–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑:
1. **‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è owner:** –í—Å–µ 3 –ø–æ–¥–ø–∏—Å–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. **‚úÖ –ö–∞–Ω–∞–ª—ã:** –í—Å–µ –∫–∞–Ω–∞–ª—ã (general, vip, moderators) —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
3. **‚úÖ OAuth –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **‚ùå URL endpoint:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `/channel/{id}?layout=embedded` –≤–º–µ—Å—Ç–æ `/embed?channel={id}`

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:
URL endpoint `/channel/{id}?layout=embedded` –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ—Ç UI —ç–ª–µ–º–µ–Ω—Ç—ã Rocket.Chat, –≤–∫–ª—é—á–∞—è –∫–Ω–æ–ø–∫—É "Join the Channel".

## üõ†Ô∏è –†–ï–®–ï–ù–ò–ï

### –ò–∑–º–µ–Ω–µ–Ω URL endpoint:
- **–û–¢:** `/channel/{channelId}?layout=embedded`  
- **–ù–ê:** `/embed?channel={channelId}`

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- `templates/chat/rocketchat_integrated.html`

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

#### 1. –ù–∞—á–∞–ª—å–Ω—ã–π URL iframe:
```html
<!-- –ë–´–õ–û -->
src="{{ rocketchat_url }}/channel/general?layout=embedded"

<!-- –°–¢–ê–õ–û -->
src="{{ rocketchat_url }}/embed?channel=general"
```

#### 2. –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤:
```javascript
// –ë–´–õ–û
const newUrl = `{{ rocketchat_url }}/channel/${actualChannelId}?layout=embedded`;

// –°–¢–ê–õ–û  
const newUrl = `{{ rocketchat_url }}/embed?channel=${actualChannelId}`;
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ console.log —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–æ–≤–æ–º—É endpoint

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –°–æ–∑–¥–∞–Ω—ã –±—ç–∫–∞–ø—ã:
- `templates/chat/rocketchat_integrated.html.backup_20250623_200620`
- `templates/chat/rocketchat_integrated.html.backup_before_embed_fix_*`
- `rocketchat_backups/rocketchat_backup_20250623_200608.json`

### –ù–ï –∏–∑–º–µ–Ω—è–ª–æ—Å—å:
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MongoDB
- ‚ùå –ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- ‚ùå OAuth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Docker

### –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:
- ‚úÖ URL endpoint –≤ HTML —à–∞–±–ª–æ–Ω–µ

## üìã –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–∞:**
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://127.0.0.1:8001/chat/integrated/
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ iframe –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–±—â–∏–π –∫–∞–Ω–∞–ª

2. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤:**
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "VIP" 
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã"
   - –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ "–û–±—â–∏–π"

3. **–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–Ω–æ–ø–∫–∏ Join Channel:**
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–Ω–∞–ª–∞
   - –ö–Ω–æ–ø–∫–∞ "Join the Channel" –ù–ï –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–ª—è—Ç—å—Å—è
   - –ü–µ—Ä–µ—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º

4. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —á–∞—Ç–∞:**
   - –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
   - –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "Join the Channel" –∏—Å—á–µ–∑–ª–∞
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞–ª —á–∏—â–µ (—Ç–æ–ª—å–∫–æ —á–∞—Ç, –±–µ–∑ –ª–∏—à–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç

## üö® –ü–õ–ê–ù –û–¢–ö–ê–¢–ê

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫:

1. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—ç–∫–∞–ø:**
   ```bash
   copy templates\chat\rocketchat_integrated.html.backup_before_embed_fix_* templates\chat\rocketchat_integrated.html
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   taskkill /f /im python.exe
   daphne -b 127.0.0.1 -p 8001 config.asgi:application
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã**

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º:
- Iframe –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞  
- –ö–∞–Ω–∞–ª—ã –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### URL endpoint `/embed?channel={id}`:
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π Rocket.Chat endpoint –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ embed —Ä–µ–∂–∏–º–∞
- –°–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã –∫—Ä–æ–º–µ —á–∞—Ç–∞
- –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:
- –ß–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–æ–ª—å–∫–æ —Å —á–∞—Ç–æ–º
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫ –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ UI
- –õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ "Rocket.Chat –∫–∞–∫ backend"

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–í—ã–ø–æ–ª–Ω–µ–Ω–æ **–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ** –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ "Join the Channel". –ü–æ–¥—Ö–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ URL endpoint Rocket.Chat –¥–ª—è embed —Ä–µ–∂–∏–º–∞.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

---

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –≤—ã–∑—ã–≤–∞—é—Ç –Ω–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é! 
