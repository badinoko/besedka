## 2025-06-12 – Унификация комментариев и Reply-кнопки

1. Изменена сортировка top_level_comments во всех разделах на `-created_at` (новые сверху):
   * `growlogs/views.py`
   * `gallery/views.py`
   * `news/views.py`
2. Актуализированы AJAX-ответы, чтобы возвращать упорядоченные комментарии.
3. Улучшен JS-модуль `static/js/unified_comment.js`:
   * корректный разбор ошибок сервера;
   * обработка CSRF из cookie/hidden field;
   * скрытие блока «Ответ на…» и сброс `parent_id` после успешной отправки;
   * восстановление исходного состояния кнопки Submit.
4. Выполнен полный цикл перезапуска окружения по процедуре: `taskkill → docker-compose stop web → daphne 8001`.
5. Проверена доступность страниц `gallery/`, `news/` — HTTP 200, изменения применены. 

## 2025-06-12 – Исправление исчезновения кнопки «Ответить»

1. Во всех AJAX-хендлерах комментариев (`growlogs/views.py`, `gallery/views.py`, `news/views.py`) добавлен параметр `request=request` в `render_to_string`, чтобы активировались контекст-процессоры и переменная `user` была доступна в шаблонах.
2. После обновления списка комментариев Reply-кнопка корректно отображается без перезагрузки страницы.
3. Перезапуск окружения выполнен по стандартной процедуре. 

## 2025-06-13 – Фикс news:add_comment (Reply + сортировка)

* `news/views.py` `add_comment`: добавлен `order_by('-created_at')`, передаётся `request=request`, в JSON возвращается `comment_id`.
* `base.html`: версия unified_comment.js -> v20250613120 для принудительного кеш-баста. 
