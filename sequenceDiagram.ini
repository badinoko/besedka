sequenceDiagram
    participant U as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant F as üåê Frontend<br/>(JavaScript)
    participant B as üêç Backend<br/>(Django)
    participant D as üì¶ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

    Note over U,D: ‚ùå –°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê (–ü–†–û–ë–õ–ï–ú–ê)
    
    U->>F: –ó–∞—Ö–æ–¥–∏—Ç –≤ —á–∞—Ç
    F->>B: WebSocket connect
    B->>D: –°–æ–∑–¥–∞–µ—Ç UserChatPosition
    B->>F: üì¨ unread_info (95 –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö)
    F->>F: firstUnreadMessageId = null
    B->>F: üìö messages_history
    F->>F: displayMessages() ‚Üí scrollToBottom()
    Note over F: üö® –°–∫—Ä–æ–ª–ª–∏–Ω–≥ –ë–ï–ó –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö!
    F->>U: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–µ—Ü —á–∞—Ç–∞
    
    rect rgb(255, 240, 240)
        Note over U,D: –ü–†–û–ë–õ–ï–ú–ê: –ö–Ω–æ–ø–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞ –∏—Å—á–µ–∑–∞–µ—Ç<br/>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ!
    end

    Note over U,D: ‚úÖ –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê (–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï)
    
    U->>F: –ó–∞—Ö–æ–¥–∏—Ç –≤ —á–∞—Ç
    F->>B: WebSocket connect
    B->>D: –°–æ–∑–¥–∞–µ—Ç UserChatPosition
    Note over B: üîß –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç unread_info —Å—Ä–∞–∑—É
    B->>F: üìö messages_history
    F->>F: displayMessages() ‚Üí –∂–¥–µ—Ç unread_info
    B->>F: üì¨ unread_info (95 –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö)
    F->>F: handleUnreadInfo() ‚Üí scrollToFirstUnread()
    F->>U: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤–æ–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ —Å –∫–Ω–æ–ø–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞
    
    rect rgb(240, 255, 240)
        Note over U,D: –†–ï–ó–£–õ–¨–¢–ê–¢: –ö–Ω–æ–ø–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!<br/>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ!
    end